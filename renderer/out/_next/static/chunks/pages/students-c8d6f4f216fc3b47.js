(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[609],{9551:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/students",function(){return n(9136)}])},6022:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var s=n(4246),r=n(8039);function l(e){let{name:t,control:n,rules:l,label:a,error:o,...d}=e;return(0,s.jsx)(r.Qr,{rules:l,name:t,control:n,render:e=>{let{field:t}=e;return(0,s.jsxs)("div",{className:"w-full p-2",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:a}),(0,s.jsx)("input",{...d,...t,className:"w-full p-2 font-bold border-2 border-darkBlue rounded-md"}),(0,s.jsx)("div",{children:o&&(0,s.jsx)("span",{className:"font-bold text-primaryBlue",children:"preencha corretamente o campo"})})]})}})}},946:function(e,t,n){"use strict";n.d(t,{A:function(){return x}});var s=n(4246),r=n(9894),l=n.n(r);let a=function(e){let{children:t}=e;return(0,s.jsx)("div",{className:"h-3/5 flex flex-col gap-14 py-8 px-4 bg-primaryBlue rounded-xl shadow-lg shadow-indigo-900",children:t})},o=function(e){let{target:t,icon:n}=e;return(0,s.jsx)("div",{children:(0,s.jsx)(l(),{href:t,children:(0,s.jsx)("div",{className:"p-2 w-full bg-darkBlue rounded-md shadow-sm shadow-black",children:(0,s.jsx)(n,{size:36,color:"white"})})})})};var d=n(7901),c=n(4757),i=n(945),u=n(9039);let x={Root:function(e){let{children:t}=e;return(0,s.jsxs)("div",{className:"w-screen h-screen flex justify-around items-center p-3",children:[(0,s.jsx)("div",{children:(0,s.jsxs)(a,{children:[(0,s.jsx)(o,{target:"/",icon:d.Z}),(0,s.jsx)(o,{target:"/students",icon:c.Z}),(0,s.jsx)(o,{target:"/lectures",icon:i.Z}),(0,s.jsx)(o,{target:"/dashboard",icon:u.Z})]})}),(0,s.jsx)("div",{className:"w-10/12 h-full flex flex-col gap-10 justify-center p-6",children:t})]})},Header:function(e){let{children:t}=e;return(0,s.jsx)("div",{className:"w-full h-1/6 flex items-center justify-between px-10 rounded-md border-2 border-darkBlue shadow-lg",children:t})},Content:function(e){let{children:t}=e;return(0,s.jsx)("div",{className:"w-full h-5/6 p-5 bg-lightGray shadow-lg rounded-sm shadow-slate-400",children:t})}}},8758:function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var s=n(4246),r=n(2558);let l={Root:function(e){let{children:t,isOpen:n}=e;return n?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex justify-center items-center",children:(0,s.jsx)("div",{className:"bg-white w-2/5 rounded-md max-h-4/5 opacity-100 flex-row p-4",children:t})}):(0,s.jsx)(s.Fragment,{})},Header:function(e){let{title:t,handleClose:n}=e;return(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-darkBlue text-2xl font-bold",children:t}),(0,s.jsx)("div",{className:"bg-primaryBlue p-1 rounded-lg",onClick:n,children:(0,s.jsx)(r.Z,{color:"white"})})]})},Content:function(e){let{children:t}=e;return(0,s.jsx)("div",{className:"h-full overflow-y-auto px-2 py-4",children:t})}}},4846:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var s=n(4246),r=n(5894),l=n(8543);function a(e){let{max:t,setCurrentPage:n,currentPage:a}=e;return(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("button",{disabled:1===a,onClick:function(){n(a-1)},children:(0,s.jsx)(r.Z,{size:30})}),(0,s.jsx)("h1",{className:"bg-darkBlue py-2 px-4 rounded-sm text-white font-bold text-lg",children:a}),(0,s.jsx)("button",{disabled:t<=a,onClick:function(){n(a+1)},children:(0,s.jsx)(l.Z,{size:30})})]})}},9136:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var s=n(4246),r=n(7378),l=n(946),a=n(8758),o=n(8039),d=n(7693),c=n.n(d),i=n(6030),u=n(8788);let x=[{value:"E.F.",text:"E.F."},{value:"E.M.",text:"E.M."}],m=Array.from({length:9},(e,t)=>({value:"".concat(t+1,"\xb0"),text:"".concat(t+1,"\xb0")}));function h(e){var t;Object.entries(e).forEach(t=>{let[n,s]=t;s||(e[n]="")});let{name:n,lastName:s,motherName:r,bornDate:l,cpf:a,observation:o,gradeYear:d,gradeType:i}=e;return{name:n=n.charAt(0).toUpperCase()+n.slice(1),lastName:s=s.charAt(0).toUpperCase()+s.slice(1),motherName:r,bornDate:c()(l).unix(),cpf:a,grade:"".concat(d," Ano ").concat(i),observation:o,phones:[e.phone1,e.phone2],_id:null!==(t=e._id)&&void 0!==t?t:""}}async function f(e){let t=h(e);e._id?t._id=e._id:t._id=(0,u.Z)();try{return await (0,i.q)("add-student",t),!0}catch(e){return!1}}async function j(e){let t={...h(e),_rev:e._rev};try{return await (0,i.q)("update-student",t),!0}catch(e){return!1}}var p=n(5332),b=n(407),w=n(4196),N=n(6022);function v(e){let{name:t,control:n,options:r,...l}=e;return(0,s.jsx)(o.Qr,{rules:{required:!0},name:t,control:n,render:e=>{let{field:t}=e;return(0,s.jsxs)("select",{...t,...l,children:[(0,s.jsx)("option",{value:"",children:"-"}),r.map((e,t)=>(0,s.jsx)("option",{className:"font-bold",value:e.value,children:e.text},t))]})}})}function g(e){let{name:t,control:n,label:r,...l}=e;return(0,s.jsx)(o.Qr,{rules:{required:!1},name:t,control:n,render:e=>{let{field:t}=e;return(0,s.jsxs)("div",{className:"w-full p-2",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:r}),(0,s.jsx)("textarea",{...l,...t,className:"w-full p-2 font-bold border-2 border-darkBlue rounded-md"})]})}})}function y(e){let{isOpen:t,setOpen:n,student:l}=e,d=(0,w.Z)().setStudents,[c,i]=(0,r.useState)("create"),[u,h]=(0,r.useState)({name:"",lastName:"",motherName:"",bornDate:"",cpf:"",gradeType:"",gradeYear:"",phone1:"",phone2:"",observation:""}),{control:y,handleSubmit:k,reset:Z,setValue:B,formState:{errors:A,isSubmitting:S}}=(0,o.cI)();async function C(e){if("create"===c){if(await f(e)){p.Am.success("Aluno cadastrado"),d(!0),_();return}}else if("update"===c&&await j({...l,...e})){p.Am.success("Dados alterados"),d(!0),_();return}p.Am.error("Algo deu errado")}function _(){Z(),n(!t)}return(0,r.useEffect)(()=>{if(l){let{cpf:e,name:t,lastName:n,motherName:s,grade:r,observation:a,phones:o,bornDate:d}=l,{gradeType:c,gradeYear:u}=function(e){let[t,n]=e.split(" Ano ");return{gradeType:n,gradeYear:t}}(r),[x,m]=o;h({cpf:e,name:t,lastName:n,motherName:s,observation:a,gradeType:c,gradeYear:u,phone1:x,phone2:m,bornDate:d=(0,b.yr)(d)}),i("update")}Object.entries(u).forEach(e=>{let[t,n]=e;return B("".concat(t),n)})},[t,l]),(0,s.jsxs)(a.u.Root,{isOpen:t,children:[(0,s.jsx)(a.u.Header,{title:"Alunos",handleClose:_}),(0,s.jsx)(a.u.Content,{children:(0,s.jsxs)("form",{className:"overflow-auto h-96 p-4",onSubmit:k(C),children:[(0,s.jsx)(N.Z,{name:"name",control:y,rules:{required:!0},label:"Nome",error:A.name}),(0,s.jsx)(N.Z,{name:"lastName",control:y,rules:{required:!1},label:"Sobrenome",error:A.lastName}),(0,s.jsx)(N.Z,{name:"motherName",control:y,rules:null,label:"Nome da m\xe3e",error:A.motherName}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(N.Z,{name:"phone1",control:y,rules:{required:!0,pattern:/^\([1-9]{2}\)\d{4,5}-\d{4}$/},label:"Telefone",error:A.phone1,type:"tel",placeholder:"(00)0000-0000"}),(0,s.jsx)(N.Z,{name:"phone2",control:y,rules:{required:!1,pattern:/^\([1-9]{2}\)\d{4,5}-\d{4}$/},label:"Telefone",error:A.phone2,type:"tel",placeholder:"(00)0000-0000"})]}),(0,s.jsx)(N.Z,{name:"bornDate",control:y,rules:null,label:"Data de nascimento",error:A.bornDate,type:"date"}),(0,s.jsx)(N.Z,{name:"cpf",control:y,rules:{pattern:/^\d{3}\.\d{3}\.\d{3}\-\d{2}/},label:"CPF",error:A.cpf,placeholder:"XXX.XXX.XXX-XX"}),(0,s.jsxs)("div",{className:"w-full p-2",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"S\xe9rie"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(v,{name:"gradeYear",control:y,options:m,className:"p-1 m-2 text-center font-bold"}),(0,s.jsx)("h2",{className:"font-bold",children:"ano do"}),(0,s.jsx)(v,{name:"gradeType",control:y,options:x,className:"p-1 m-2 text-center font-bold"})]})]}),(0,s.jsx)(g,{name:"observation",control:y,label:"Observa\xe7\xf5es",rows:4}),(0,s.jsx)("div",{className:"flex w-full p-2 justify-end",children:(0,s.jsx)("button",{type:"submit",className:"flex font-bold text-lg text-white px-8 py-2 rounded-md bg-darkBlue",children:S?"Enviando":l?"Alterar":"Salvar"})})]})})]})}var k=n(7542),Z=n(3471);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let B=(0,Z.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),A=(0,Z.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),S=(0,Z.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function C(e){let{debt:t}=e;return(0,s.jsx)("div",{className:"".concat(0!==t?"bg-lightRed":"bg-primaryBlue"," h-5/5 w-1/12 flex items-center justify-center p-2 rounded-bl-md rounded-tl-md"),children:0!==t?(0,s.jsx)(B,{color:"white",size:38}):(0,s.jsx)(A,{color:"white",size:38})})}function _(e){let{phones:t}=e;return(0,s.jsxs)("div",{className:"flex gap-8",children:[(0,s.jsxs)("h2",{className:"font-bold text-lg",children:["Telefone: ",t[0]]}),t[1]?(0,s.jsxs)("h2",{className:"font-bold text-lg",children:["Telefone: ",t[1]]}):(0,s.jsx)(s.Fragment,{})]})}function q(e){let{student:t}=e;return(0,s.jsxs)("div",{className:"flex px-4 py-2 items-center justify-between w-10/12 bg-slate-200 rounded-md shadow-slate-500 shadow-md",children:[(0,s.jsxs)("div",{className:"flex items-center gap-5",children:[(0,s.jsx)(S,{size:32,color:"#00007F"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"font-bold text-2xl text-darkBlue",children:[t.name," ",t.lastName]}),(0,s.jsxs)("h2",{className:"font-bold text-lg text-darkBlue",children:["Respons\xe1vel: ",t.motherName]})]})]}),(0,s.jsx)("div",{className:"bg-darkBlue py-2 px-4 rounded-md w-1/5",children:(0,s.jsx)("h1",{className:"text-lg text-white text-center font-bold",children:t.grade})})]})}function D(e){let{debt:t}=e;return(0,s.jsx)("div",{className:"h-5/5 flex items-center justify-center",children:(0,s.jsxs)("h1",{className:"text-xl font-bold ",children:["D\xcdVIDA: R$",t]})})}function E(e){let{student:t,debtAmout:n,index:l}=e,[a,o]=(0,r.useState)(!1);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"w-11/12 flex rounded-md shadow-md shadow-slate-500 my-8",onClick:()=>o(!a),children:[(0,s.jsx)(C,{debt:n}),(0,s.jsx)("div",{className:"bg-white flex w-full rounded-tr-md rounded-br-md p-2",children:(0,s.jsxs)("div",{className:"flex w-10/12 flex-col",children:[(0,s.jsx)(q,{student:t}),(0,s.jsxs)("div",{className:"flex px-4 items-center justify-between w-2/3 my-4",children:[(0,s.jsx)(_,{phones:t.phones}),0!==n?(0,s.jsx)(D,{debt:n}):(0,s.jsx)(s.Fragment,{})]})]})})]}),(0,s.jsx)(y,{isOpen:a,setOpen:o,student:t})]},l)}var O=n(4846);function Y(){let e=(0,w.Z)().refreshStudents,t=(0,w.Z)().setStudents,[n,a]=(0,r.useState)(!0),[o,d]=(0,r.useState)([]),[c,u]=(0,r.useState)(!1),[x,m]=(0,r.useState)(1),[h,f]=(0,r.useState)(10),[j,b]=(0,r.useState)(1),[N,v]=(0,r.useState)(""),[g,Z]=(0,r.useState)(0),[B,A]=(0,r.useState)(!0);async function S(){A(!1);let e="name",t=N;if(N.includes(":")){let[n,s]=N.split(":");"mae"===(n=n.trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""))?e="by-mothername":"divida"===n&&(e="in-debt"),t=s.trim()}try{let{students:n}=await (0,i.q)("find-students-".concat(e),t);d(n)}catch(e){p.ZP.error("Busca com problemas...")}}return(0,r.useEffect)(()=>{(async function(){try{let{total:e}=await (0,i.q)("count-students");Z(e),b(Math.ceil(e/h))}catch(e){Z(0)}})()},[e,x,N]),(0,r.useEffect)(()=>{async function e(){try{let{students:e}=await (0,i.q)("find-all-students",x,h);d(e)}catch(e){p.ZP.error("Algo deu errado")}finally{a(!1),t(!1)}}""===N&&(A(!0),e())},[e,x,N]),(0,s.jsxs)(l.A.Root,{children:[(0,s.jsxs)(l.A.Header,{children:[(0,s.jsx)("div",{className:"flex",children:(0,s.jsxs)("div",{className:"flex items-center gap-10",children:[(0,s.jsx)("div",{children:(0,s.jsx)("input",{className:"p-2 border-2 border-darkBlue focus:border-darkBlue placeholder:text-slate-600 text-slate-600 font-bold",type:"text",placeholder:"Buscar alunos",onChange:e=>v(e.target.value)})}),(0,s.jsx)("button",{className:"py-2 px-4 flex gap-5 items-center bg-darkBlue shadow-sm shadow-slate-400 rounded-sm",onClick:S,children:(0,s.jsx)("h2",{className:"text-white font-bold text-lg",children:"Buscar"})})]})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("button",{className:"py-2 px-4 flex gap-5 items-center bg-lightRed shadow-sm shadow-slate-400 rounded-sm",onClick:()=>u(!0),children:[(0,s.jsx)(k.Z,{color:"white"}),(0,s.jsx)("h2",{className:"font-bold text-xl text-white",children:"Novo aluno"})]}),(0,s.jsx)(y,{isOpen:c,setOpen:u,student:null})]}),(0,s.jsx)("div",{className:"flex",children:(0,s.jsx)("div",{className:"bg-primaryBlue rounded-sm py-2 px-4 shadow-md shadow-slate-400",children:n?(0,s.jsx)("p",{className:"text-white text-xl font-bold",children:"Carregando..."}):(0,s.jsxs)("h1",{className:"text-white text-xl font-bold",children:[g," Aluno(s) cadastrado(s)"]})})})]}),(0,s.jsx)(l.A.Content,{children:(0,s.jsxs)("div",{className:"h-full flex flex-col gap-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-slate-800 text-center",children:"Alunos"}),(0,s.jsx)("div",{className:"h-5/6 w-full overflow-y-auto p-2",children:0!==o.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{className:"text-darkBlue text-lg font-bold text-center",children:'Busque alunos por nome ou nome da m\xe3e (use "m\xe3e:" antes do nome) '}),(0,s.jsx)("h2",{className:"text-darkBlue text-lg font-bold text-center",children:'Busque alunos em d\xedvida (use "divida:") '}),o.map((e,t)=>(0,s.jsx)(E,{index:t,student:e.student,debtAmout:e.debtAmount},t))]}):(0,s.jsx)("h2",{className:"text-darkBlue text-xl font-bold text-center",children:"Nenhum aluno encontrado!"})}),(0,s.jsx)("div",{className:"flex justify-center my-3",children:B?(0,s.jsx)(O.Z,{currentPage:x,max:j,setCurrentPage:m}):(0,s.jsx)(s.Fragment,{})})]})})]})}},407:function(e,t,n){"use strict";n.d(t,{an:function(){return l},hK:function(){return c},mA:function(){return i},u0:function(){return x},wf:function(){return d},yn:function(){return u},yr:function(){return o}});var s=n(7693),r=n.n(s);let l="dom-seg-ter-qua-qui-sex-sab".split("-"),a="jan-fev-mar-abr-mai-jun-jul-ago-set-out-nov-dec".split("-");function o(e){return r()(e).format("YYYY-MM-DD")}function d(e){return r()(e).format("DD/MM/YYYY")}function c(e){return r()(e).format("HH:mm")}function i(e){return r()(e).format("YYYY-MM-DDTHH:mm")}function u(e){let t=r()(e).startOf("day"),n=t.month(),s=t.year();return"".concat(a[n],"/").concat(s)}function x(e){let[t,n]=e[0].split("/"),s=r()().set("d",1).set("y",parseInt(n)).set("month",a.indexOf(t)),[l,o]=e[1].split("/"),d=r()().set("d",1).set("y",parseInt(o)).set("month",a.indexOf(l));return s.isBefore(d)?-1:1}r()().startOf("day")},6030:function(e,t,n){"use strict";async function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return new Promise((t,s)=>{window.main.receive("".concat(e,"-success"),n=>{window.main.stop(e),t(n)}),window.main.send(e,...n);let r=setTimeout(()=>{s(Error("Timeout error"))},5e3);window.main.receive("".concat(e,"-error"),t=>{clearTimeout(r),window.main.stop(e),s(t)})})}n.d(t,{q:function(){return s}})},4196:function(e,t,n){"use strict";let s=(0,n(6805).Ue)(e=>({refreshStudents:!1,refreshLectures:!1,refreshLessons:!1,setStudents:t=>e(()=>({refreshStudents:t})),setLectures:t=>e(()=>({refreshLectures:t})),setLessons:t=>e(()=>({refreshLessons:t}))}));t.Z=s}},function(e){e.O(0,[999,773,888,774,179],function(){return e(e.s=9551)}),_N_E=e.O()}]);